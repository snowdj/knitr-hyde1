<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Five Reasons to Teach Elementary Statistics With R:  #1</title>
    <meta name="description" content="A blog devoted mostly to the the teaching of undergraduate-level statstics and data anlysis with R, along with occasional technical notes on R-related tools.
">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://homerhanumat.github.io/blog/2014/03/tigerstatsintro.html">
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">A Statistics Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/archives/">Archives</a>
          
        
          
          <a class="page-link" href="/categories/">Categories</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Five Reasons to Teach Elementary Statistics With R:  #1</h1>
    <p class="post-meta">Mar 31, 2014</p>
  </header>

  <article class="post-content">
    <ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#reason-1--package-mosaic" id="markdown-toc-reason-1--package-mosaic">Reason #1:  Package <code class="highlighter-rouge">mosaic</code></a>    <ul>
      <li><a href="#keeping-simple-things-simple" id="markdown-toc-keeping-simple-things-simple">Keeping Simple Things Simple</a></li>
      <li><a href="#flow-control-for-the-masses" id="markdown-toc-flow-control-for-the-masses">Flow-Control for the Masses</a></li>
      <li><a href="#there-is-much-more" id="markdown-toc-there-is-much-more">There is Much More</a></li>
    </ul>
  </li>
  <li><a href="#references" id="markdown-toc-references">References</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>This is is first in a projected five-part series of posts aimed at colleagues who teach elementary statistics.</p>

<p>I can’t remember exactly how I first made acquaintance with R, but it’s been an important part of my teaching/consulting life since at least 2007, when I used it for the first time in an upper-level undergraduate statistics class.  As of last Fall all of our statistics classes—even the elementary ones—are based on R.  We may never return to a ground-up GUI platform.  If you teach with R but hesitate to spring such a powerful and complex tool on unsuspecting introductory students—many of whom whom will have had no prior experience with the command line, much less with coding—then I hope these posts will give you some encouragement.</p>

<h2 id="reason-1--package-mosaic">Reason #1:  Package <code class="highlighter-rouge">mosaic</code></h2>

<p>This package is a product of the NSF-funded <a href="http://mosaic-web.org/">Project Mosaic</a>, led by Nick Horton, Daniel Kaplan and Randall Pruim.  It’s on CRAN, but you might want to keep up with the very latest releases on Github:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">require</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span>
<span class="n">install_github</span><span class="p">(</span><span class="n">repo</span><span class="o">=</span><span class="s2">"rpruim/mosaic"</span><span class="p">)</span></code></pre></figure>

<p><code class="highlighter-rouge">mosaic</code> aims to flatten the learning curve for elementary students by gentling down the coding aspects of the R experience.  With <code class="highlighter-rouge">mosaic</code>:</p>

<ul>
  <li>students need to know relatively few R-functions in order to thrive in the introductory course;</li>
  <li>many of the these functions are “wrappers” for standard R-functions, and provide a fairly uniform interface for user input;</li>
  <li>the package provides tools that mostly obviate the need for students to deal with R as a programming language:
    <ul>
      <li>the students don’t have to write their own functions;</li>
      <li>they don’t need to think much about the different types of R objects;</li>
      <li>they don’t even need to learn about flow-control structures.</li>
    </ul>
  </li>
</ul>

<h3 id="keeping-simple-things-simple">Keeping Simple Things Simple</h3>

<p>R can make the easy stuff surprisingly tricky for beginners:  suppose for example, that you want numerical summaries of a particular numerical variable, broken down by the values of some factor variable.  Standard procedure in R would be to write your own anonymous function as an argument for <code class="highlighter-rouge">aggregate()</code>, thus:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">aggregate</span><span class="p">(</span><span class="n">mpg</span><span class="o">~</span><span class="n">cyl</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">mtcars</span><span class="p">,</span>
    <span class="n">FUN</span><span class="o">=</span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">c</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">sd</span><span class="o">=</span><span class="n">sd</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##   cyl  mpg.mean    mpg.sd
## 1   4 26.663636  4.509828
## 2   6 19.742857  1.453567
## 3   8 15.100000  2.560048</code></pre></figure>

<p><code class="highlighter-rouge">mosaic</code> skirts the problem by providing wrapper functions for aggregation:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">require</span><span class="p">(</span><span class="n">mosaic</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">mean</span><span class="p">(</span><span class="n">mpg</span><span class="o">~</span><span class="n">cyl</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">mtcars</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##        4        6        8 
## 26.66364 19.74286 15.10000</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">sd</span><span class="p">(</span><span class="n">mpg</span><span class="o">~</span><span class="n">cyl</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">mtcars</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##        4        6        8 
## 4.509828 1.453567 2.560048</code></pre></figure>

<p>One can attain even more simplicity, at only a small cost in flexibility, by sticking to <code class="highlighter-rouge">mosaic</code>’s <code class="highlighter-rouge">favstats()</code> as a one-stop shop:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">favstats</span><span class="p">(</span><span class="n">mpg</span><span class="o">~</span><span class="n">cyl</span><span class="p">,</span><span class="n">data</span><span class="o">=</span> <span class="n">mtcars</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##   cyl  min    Q1 median    Q3  max     mean       sd  n missing
## 1   4 21.4 22.80   26.0 30.40 33.9 26.66364 4.509828 11       0
## 2   6 17.8 18.65   19.7 21.00 21.4 19.74286 1.453567  7       0
## 3   8 10.4 14.40   15.2 16.25 19.2 15.10000 2.560048 14       0</code></pre></figure>

<h3 id="flow-control-for-the-masses">Flow-Control for the Masses</h3>

<p><code class="highlighter-rouge">mosaic</code> includes powerful wrapper functions that permit extensive work with re-sampling and simulation, without the need to learn flow-control.  Here follows a <code class="highlighter-rouge">mosaic</code>-style implementation of a permutation test.</p>

<p>Consider the data frame <code class="highlighter-rouge">Pseudoscorpions</code> from the <code class="highlighter-rouge">abd</code> package:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">require</span><span class="p">(</span><span class="n">abd</span><span class="p">)</span>
<span class="n">data</span><span class="p">(</span><span class="n">Pseudoscorpions</span><span class="p">)</span></code></pre></figure>

<p><code class="highlighter-rouge">Pseudoscorpions</code> contains the results of an experiment on 36 female Pseudoscorpions:  each one was either mated twice with a single male (<code class="highlighter-rouge">SM</code>) or was mated with two males, one time each (<code class="highlighter-rouge">DM</code>), receiving about the same total amount of sperm under either treatment.  The idea was to see whether an increase in genetic diversity of sperm sources increases the number of successful broods a female produces during her lifetime.</p>

<p>Here are some descriptive results:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">favstats</span><span class="p">(</span><span class="n">successful.broods</span><span class="o">~</span><span class="n">treatment</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">Pseudoscorpions</span><span class="p">)[</span><span class="n">c</span><span class="p">(</span><span class="s2">"treatment"</span><span class="p">,</span><span class="s2">"mean"</span><span class="p">,</span><span class="s2">"sd"</span><span class="p">)]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##   treatment  mean       sd
## 1        DM 3.625 1.962142
## 2        SM 2.200 1.609184</code></pre></figure>

<p>For the permutation test, we first compute and store the observed difference between the sample means:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">obsDiff</span> <span class="o">&lt;-</span> <span class="n">diffmean</span><span class="p">(</span><span class="n">successful.broods</span><span class="o">~</span><span class="n">treatment</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">Pseudoscorpions</span><span class="p">)</span>
<span class="n">obsDiff</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## diffmean 
##   -1.425</code></pre></figure>

<p>Next, we create an empirical Null distribution with <code class="highlighter-rouge">shuffle()</code> (the random permutation function) and <code class="highlighter-rouge">do()</code> (a for-loop wrapper):</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">set.seed</span><span class="p">(</span><span class="m">12345</span><span class="p">)</span>
<span class="n">nullDist</span> <span class="o">&lt;-</span> <span class="n">do</span><span class="p">(</span><span class="m">2500</span><span class="p">)</span><span class="o">*</span><span class="p">(</span>
  <span class="n">diffmean</span><span class="p">(</span><span class="n">successful.broods</span><span class="o">~</span><span class="n">shuffle</span><span class="p">(</span><span class="n">treatment</span><span class="p">),</span>
      <span class="n">data</span><span class="o">=</span><span class="n">Pseudoscorpions</span><span class="p">))</span></code></pre></figure>

<p>Finally, we call <code class="highlighter-rouge">statTally()</code> for numerical and graphical analysis of the results:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">statTally</span><span class="p">(</span><span class="n">obsDiff</span><span class="p">,</span><span class="n">nullDist</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## Null distribution appears to be asymmetric. (p = 0.000258)
## 
## Test statistic applied to sample data =  -1.425
## 
## Quantiles of test statistic applied to random data:</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##    50%    90%    95%    99% 
## 0.0375 0.8250 0.9375 1.3875</code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## 
## Of the 2501 samples (1 original + 2500 random),
## 
## 	12 ( 0.48 % ) had test stats = -1.425
## 
## 	40 ( 1.6 % ) had test stats &lt;= -1.425</code></pre></figure>

<p><img src="/knitr-jekyll/figure/source/2014-04-01-tigerstatsintro/reason1hist-1.png" alt="plot of chunk reason1hist" /></p>

<p>We seem to have fairly strong evidence (<script type="math/tex">P \approx 1.7\%</script>) that mating with more males increases the number of successful broods.</p>

<h3 id="there-is-much-more">There is Much More</h3>

<p>I have only scratched the surface of the <code class="highlighter-rouge">mosaic</code> package, which is rich enough to support statistics instruction in both elementary and advanced courses.  The <code class="highlighter-rouge">mosaic</code> authors provide extensive instructor resources in the package vignettes, and frequently offer workshops and short-courses, especially through events sponsored by the <a href="https://www.causeweb.org/">Consortium for the Advancement of Undergraduate Statistics Education</a>.</p>

<p>Next week I’ll introduce a supplementary package that is intended for students who might require even more simplicity, and that aligns their R experience with a particular set of teaching objectives.</p>

<h2 id="references">References</h2>

<p>The Pseudoscorpion experiment is discussed in Whitlock and Schluter’s <em>The Analysis of Biological Data</em> (Roberts and Company Publishers; First Edition, 1st Edition July 2008).</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">A Statistics Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Homer White</li>
          <li><a href="mailto:homerhanumatATgmailDOTcom">homerhanumatATgmailDOTcom</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/homerhanumat">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">homerhanumat</span>
            </a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">A blog devoted mostly to the the teaching of undergraduate-level statstics and data anlysis with R, along with occasional technical notes on R-related tools.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
